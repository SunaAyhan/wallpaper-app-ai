"use strict";(self.webpackChunkwallpaper_anime=self.webpackChunkwallpaper_anime||[]).push([[994],{994:function(e,n,t){t.r(n),t.d(n,{GoogleAuthWeb:function(){return c}});var r=t(4165),a=t(5861),i=t(5671),s=t(3144),o=t(136),u=t(7277),c=function(e){(0,o.Z)(t,e);var n=(0,u.Z)(t);function t(){return(0,i.Z)(this,t),n.call(this)}return(0,s.Z)(t,[{key:"loadScript",value:function(){if("undefined"!==typeof document){var e="gapi";if(!(null===document||void 0===document?void 0:document.getElementById(e))){var n=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.defer=!0,t.async=!0,t.id=e,t.onload=this.platformJsLoaded.bind(this),t.src="https://apis.google.com/js/platform.js",n.appendChild(t)}}}},{key:"initialize",value:function(){var e,n,t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clientId:"",scopes:[],grantOfflineAccess:!1};if("undefined"!==typeof window){var a=null===(e=document.getElementsByName("google-signin-client_id")[0])||void 0===e?void 0:e.content,i=r.clientId||a||"";i||console.warn("GoogleAuthPlugin - clientId is empty"),this.options={clientId:i,grantOfflineAccess:null!==(n=r.grantOfflineAccess)&&void 0!==n&&n,scopes:r.scopes||[]},this.gapiLoaded=new Promise((function(e){window.gapiResolve=e,t.loadScript()})),this.addUserChangeListener()}}},{key:"platformJsLoaded",value:function(){var e=this;gapi.load("auth2",(function(){var n={client_id:e.options.clientId,plugin_name:"CodetrixStudioCapacitorGoogleAuth"};e.options.scopes.length&&(n.scope=e.options.scopes.join(" ")),gapi.auth2.init(n),window.gapiResolve()}))}},{key:"signIn",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,a){var i,s,o,u,c,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(o=null!==(i=n.options.grantOfflineAccess)&&void 0!==i&&i)){e.next=9;break}return e.next=5,gapi.auth2.getAuthInstance().grantOfflineAccess();case 5:u=e.sent,s=u.code,e.next=11;break;case 9:return e.next=11,gapi.auth2.getAuthInstance().signIn();case 11:if(c=gapi.auth2.getAuthInstance().currentUser.get(),!o){e.next=15;break}return e.next=15,c.reloadAuthResponse();case 15:(p=n.getUserFrom(c)).serverAuthCode=s,t(p),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),a(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(n,t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance().currentUser.get().reloadAuthResponse();case 2:return n=e.sent,e.abrupt("return",{accessToken:n.access_token,idToken:n.id_token,refreshToken:""});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gapi.auth2.getAuthInstance().signOut());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"addUserChangeListener",value:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gapiLoaded;case 2:gapi.auth2.getAuthInstance().currentUser.listen((function(e){n.notifyListeners("userChange",e.isSignedIn()?n.getUserFrom(e):null)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserFrom",value:function(e){var n={},t=e.getBasicProfile();n.email=t.getEmail(),n.familyName=t.getFamilyName(),n.givenName=t.getGivenName(),n.id=t.getId(),n.imageUrl=t.getImageUrl(),n.name=t.getName();var r=e.getAuthResponse(!0);return n.authentication={accessToken:r.access_token,idToken:r.id_token,refreshToken:""},n}}]),t}(t(6653).Uw)}}]);
//# sourceMappingURL=994.a61fd359.chunk.js.map